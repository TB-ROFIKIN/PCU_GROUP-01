CREATE DATABASE RESTAURANT_DB;

CREATE TABLE Menu (
  item_id VARCHAR(6) PRIMARY KEY,
  item_name VARCHAR(255),
  item_type VARCHAR(255),
  item_category VARCHAR(255),
  item_price DECIMAL(04, 2),
  item_description VARCHAR(255)
);

CREATE TABLE Accounts (
  account_id INT PRIMARY KEY AUTO_INCREMENT,
  email VARCHAR(255),
  register_date DATE,
  phone_number VARCHAR(255),
  password VARCHAR(255)
);

CREATE TABLE Staffs (
  staff_id INT PRIMARY KEY AUTO_INCREMENT,
  staff_name VARCHAR(255),
  role VARCHAR(255),
  account_id INT,
  FOREIGN KEY (account_id ) REFERENCES Accounts(account_id )
);

CREATE TABLE Memberships (
  member_id INT PRIMARY KEY AUTO_INCREMENT,
  member_name VARCHAR(255),
  points INT,
  account_id INT,
  FOREIGN KEY (account_id ) REFERENCES Accounts(account_id )
);

CREATE TABLE Restaurant_Tables (
  table_id INT PRIMARY KEY AUTO_INCREMENT,
  capacity INT,
  is_available BOOLEAN
);


CREATE TABLE Table_Availability (
  availability_id INT PRIMARY KEY AUTO_INCREMENT,
  table_id INT,
  reservation_date DATE,
  reservation_time TIME,
  status VARCHAR(20),
  FOREIGN KEY (table_id) REFERENCES Restaurant_Tables(table_id)
);

CREATE TABLE Reservations (
  reservation_id INT PRIMARY KEY AUTO_INCREMENT,
  customer_name VARCHAR(255),
  table_id INT,
  reservation_time TIME,
  reservation_date DATE,
  head_count INT,
  special_request VARCHAR(255),
  FOREIGN KEY (table_id) REFERENCES Restaurant_Tables(table_id)
);

CREATE TABLE card_payments (
    card_id INT AUTO_INCREMENT PRIMARY KEY,
    account_holder_name VARCHAR(255) NOT NULL,
    card_number VARCHAR(16) NOT NULL,
    expiry_date VARCHAR(7) NOT NULL,
    security_code VARCHAR(3) NOT NULL
);

CREATE TABLE Bills (
  bill_id INT PRIMARY KEY AUTO_INCREMENT,
  staff_id INT,
  member_id INT,
  reservation_id INT,
  table_id INT,
  card_id INT,
  payment_method VARCHAR(255),
  bill_time DATETIME,
  payment_time DATETIME,
  FOREIGN KEY (staff_id) REFERENCES Staffs(staff_id),
  FOREIGN KEY (member_id) REFERENCES Memberships(member_id),
  FOREIGN KEY (reservation_id) REFERENCES Reservations(reservation_id),
  FOREIGN KEY (table_id) REFERENCES Restaurant_Tables(table_id),
  FOREIGN KEY (card_id) REFERENCES card_payments(card_id)
);

CREATE TABLE Bill_Items (
  bill_item_id INT PRIMARY KEY AUTO_INCREMENT,
  bill_id INT,
  item_id VARCHAR(6),
  quantity INT,
  FOREIGN KEY (bill_id) REFERENCES Bills(bill_id),
  FOREIGN KEY (item_id) REFERENCES Menu(item_id)
);

CREATE TABLE Kitchen (
    kitchen_id INT AUTO_INCREMENT PRIMARY KEY,
    table_id INT,
    item_id VARCHAR(6),
    quantity INT,
    time_submitted DATETIME,
    time_ended DATETIME,
    FOREIGN KEY (table_id) REFERENCES Restaurant_Tables(table_id),
    FOREIGN KEY (item_id) REFERENCES Menu(item_id)
);




INSERT INTO Restaurant_Tables (table_id, capacity, is_available) VALUES
  ('1', '1', 1),
  ('2', '3', 1),
  ('3', '2', 1),
  ('4', '4', 1),
  ('5', '5', 1),
  ('6', '6', 1),
  ('7', '7', 1),
  ('8', '8', 1),
  ('9', '8', 1),
  ('04','04', 1);


INSERT INTO Menu (item_id, item_name, item_type, item_category, item_price, item_description)
VALUES
  ('MD1', 'Fish Amok ', 'Fish', 'Main Dishes', 2.5,'250g'),
  ('MD2', 'Samlor Machu Trey', 'Fish', 'Main Dishes', 2.5, '300g'),
  ('MD3', 'Trey Ang', 'Fish', 'Main Dishes', 3, '040g'),
  ('MD4', 'Nom Banh Chok Trey', 'Fish', 'Main Dishes', 3.5, '300g'),
  ('MD5', 'Lok Lak ', 'Beef', 'Main Dishes', 2.5, '250g'),
  ('MD6', 'Char Kroeung', 'Beef with Kroeung Paste', 'Main Dishes', 4, 'beef cooked with kroeung'),
  ('MD7', 'Sach Ko Ang' , 'Beef', 'Main Dishes', 1.25, 'A stir-fried dish featuring thin slices of beef cooked with water spinach, garlic, chilies, and fish sauce. '),
  ('MD8', 'Kari Sach Ko', 'Beef', 'Main Dishes', 1.50, 'a rich and flavorful Cambodian curry made with beef, vegetables, coconut milk, and a red curry.'),
  ('MD9', 'Banh Chok Sach Ko', 'Rice Noodle Soup with Beef', 'Main Dishes', 1.75, 'A comforting and flavorful soup made with rice noodles, beef broth, vegetables, and sliced beef.'),
  ('MD04', 'Beef with Bamboo Shoots', 'Beef', 'Main Dishes', 3.5, ' stir-fried dish featuring thin slices of beef cooked with bamboo shoots, vegetables, and a savory sauce.'),
  ('MD11', 'Beef Flank Salad', 'Beef', 'Main Dishes',  3.75, 'A refreshing and flavorful salad made with thinly sliced marinated flank steak, vegetables (onions, cucumbers), herbs, and a tangy dressing.'),
  ('MD12', 'Samlor Kari', 'Chicken ', 'Main Dishes',  4, ' A flavorful and comforting curry made with chicken, vegetables like green beans and eggplant, coconut milk, kroeung paste (a fragrant spice blend), and fish sauce.'),
  ('MD13', 'Cha Kroeung Sach Moan', 'Chicken', 'Main Dishes',  2.5, 'stir-fried chicken marinated in lemongrass, turmeric, and other spices, resulting in a fragrant and flavorful dish.'),
  ('MD14', 'Borbor Sach Moun', 'Chicken', 'Main Dishes',  3.5, 'A comforting and nourishing dish made with rice porridge, chicken broth, shredded chicken, and sometimes vegetables and herbs like green onions and chilies. '),

  ('S1', 'Ngam Nov Sach Moan', 'Chicken', 'Side Dishes',  3.5, 'a tangy and flavorful soup made with chicken, vegetables (including tomatoes, okra, and bean sprouts), tamarind, lemongrass, and other spices.'),
  ('S2', 'Mann Oeng K'tem Sor', 'Chicken', 'Side Dishes',  2.5, 'stir-fried dish features chicken cooked with bamboo shoots, green beans, and other vegetables in a savory sauce.'),
  ('S3', 'Num Banh Chok Sach Moan ', 'Chicken', 'Side Dishes',  3.5, 'rice noodles served in a flavorful coconut curry broth with vegetables, herbs, and chicken.'),
  ('S4','Amok Sach Moan', 'Chickenn', 'Side Dishes',  2.5, 'this dish features steamed chicken instead of fish in a creamy coconut curry flavored with kroeung.'),

  ('L1', 'Sting', 'Energy Drink', 'Drinks', 0.75, ' 250ml'),
  ('L2', 'Carabao', 'Energy Drink', 'Drinks', 1, ' 220ml'),
  ('L3', 'Red Bull', 'Energy Drink', 'Drinks', 1, ' 220ml'),
  ('L4', 'Bacchus', 'Energy Drink', 'Drinks', 1. ' 250ml'),
  ('L5', 'Boostrong', 'Energy Drink', 'Drinks', 0.75, ' 250ml'),
  ('L6', 'Krud', 'Energy Drink', 'Drinks', 0.75, ' 330ml'),
  ('L7', 'Wurkz', 'Energy Drink', 'Drinks', 0.75, ' 330ml'),
  ('L8', 'CacaCola', 'Energy Drink', 'Drinks', 0.75, ' 250ml'),
  ('L9', 'Champion', 'Energy Drink', 'Drinks', 1, ' 220ml'),
  ('L04', 'Ize', 'Energy Drink', 'Drinks', 0.75, ' 220ml'),
  ('L11 'Monster', 'Energy Drink', 'Drinks', 0.75, ' 330ml'),
  ('L12', 'M150', 'Energy Drink', 'Drinks', 0.75, ' 220ml'),
  ('L13', 'Pocarisweat', 'Energy Drink', 'Drinks', 1, ' 250ml'),
  ('L14', 'V-Active', 'Energy Drink', 'Drinks', 0.75, ' 330ml'),
  ('L15', 'Pepsi', 'Energy Drink', 'Drinks', 0.75, ' 330ml')


-- Accounts table
INSERT INTO Accounts (email, register_date, phone_number, password)
VALUES ('fikin@gmail.com', '2024-06-1', '+85512345678', 'fikin123'),
       ('leakhena@gmail.com', '2024-06-2', '+855963852741', 'leakhena123'),
       ('pheaepnst@gmail.com', '2024-06-3', '+855789456123', 'pheaep123'),
       ('ratanak@gmail.com', '2024-06-4', '+855147258369', 'ratanak123'),
       ('rinmakara@gmail.com', '2024-06-5', '+85515975326', 'makara123'),
       ('nithhzz@gmail.com', '2024-06-6', '+85599924681', 'nithh123'),
       ('ratanaks@gmail.com', '2024-06-7', '+85512777888', 'ratanaks123');


-- Staffs table
INSERT INTO Staffs (staff_name, role, account_id)
VALUES ('NithhzzZ', 'Manager', 1),
       ('In Leakhena', 'Waiter', 2),
       ('Noch SontekPheap', 'Waiter', 3),
       ('Ratanak', 'Chef', 4),
       ('Rin Makara', 'Chef', 5),
       ('Sour Ratanak', 'Chef', 6),
       ('Rofikin', 'Manager', 7);


-- Memberships table
INSERT INTO Memberships (member_name, points,account_id)
VALUES
	('Meng Hoang MG', 400,11),
       	('Seng Naiheang', 200,12),
       	('Roma', 300,13),
       	('Somang', 400,14),
       	('Panha', 500,15),
       	('Nitza', 600,16),
       	('Roza', 700,17),
       	('Faelin', 800,18),
       	('Vesna', 900,19),
       	('Nana', 0400,20);



-- Reservations table
INSERT INTO Reservations (reservation_id, customer_name, table_id, reservation_time, reservation_date, head_count, special_request)
VALUES 
(2220241, 'A', 1, '22:00:34', '2024-04-28', 1, 'Prepare Panadol for me'),
(2220242, 'B', 2, '22:00:34', '2024-04-15', 1, 'Default Special Request'),
(1920243, 'C', 3, '19:30:00', '2024-04-14', 2, 'Vegan options needed'),
(2020244, 'D', 4, '20:00:00', '2024-04-27', 3, 'Birthday celebration'),
(1920245, 'E', 5, '19:45:00', '2024-04-01', 2, 'Quiet corner, please'),
(1820247, 'F', 7, '18:30:00', '2024-04-03', 2, 'Allergies: peanuts'),
(1920249, 'G', 9, '19:15:00', '2024-04-05', 2, 'Surprise dessert for anniversary'),
(1111111, 'H', 9, '19:15:00', '2024-04-05', 2, 'Description'),
(1420241, 'I', 04, '14:45:00', '2024-04-06', 3, 'Window seat, if available');

INSERT INTO card_payments (card_id, account_holder_name, card_number, expiry_date, security_code)
VALUES
('1', 'N', '1234567890123456', '04/15', '123'),
('2', 'B', '2345678901234567', '04/24', '456'),
('3', 'C', '3456789012345678', '05/30', '789'),
('4', 'I', '4567890123456789', '05/28', '321'),
('5', 'A', '5678901234567890', '05/29', '654'),
('6', 'E', '7890123456789012', '04/19', '123'),
('7', 'F', '1234123412341234', '04/25', '654'),
('8', 'G', '2345234523452345', '04/24', '987'),
('9', 'D', '3456345634563456', '05/23', '123'),
('04', 'H', '4567456745674567', '05/22', '456');

INSERT INTO Bills (staff_id, member_id, reservation_id, table_id, card_id, payment_method, bill_time, payment_time)
VALUES
(1, 1, 2220241, 1, 1, 'Card', '2024-05-28 22:45:00', '2024-05-28 22:50:00'),
(1, 5, NULL, 5, NULL, 'Cash', '2024-05-28 19:00:00', '2024-05-28 19:05:00'),
(1, 2, 2220242, 2, 2, 'Card', '2024-05-29 22:45:00', '2024-05-29 22:50:00'),
(2, 3, 1920243, 3, NULL, 'Cash', '2024-05-30 20:15:00', '2024-05-30 20:20:00'),
(2, 4, 2020244, 4, 3, 'Card', '2024-05-30 20:30:00', '2024-05-30 20:35:00'),
(2, 8, NULL, 6, NULL, 'Cash', '2024-05-30 20:15:00', '2024-05-30 20:20:00'),
(3, 5, 1920245, 5, NULL, 'Cash', '2024-04-01 20:15:00', '2024-04-01 20:20:00'),
(3, 6, NULL, 7, NULL, 'Cash', '2024-04-01 19:00:00', '2024-04-01 19:05:00'),
(3, 18, NULL, 2, NULL, 'Cash', '2024-04-01 18:30:00', '2024-04-01 18:35:00'),
(4, 7, NULL, 9, NULL, 'Cash', '2024-04-02 19:30:00', '2024-04-02 19:35:00'),
(4, 17, NULL, 8, NULL, 'Cash', '2024-04-02 20:00:00', '2024-04-02 20:05:00'),
(4, 8, NULL, 04, 4, 'Card', '2024-04-02 19:00:00', '2024-04-02 19:05:00'),
(5, 9, 1820247, 6, 5, 'Card', '2024-04-03 18:45:00', '2024-04-03 18:50:00'),
(5, 16, NULL, 9, NULL, 'Cash', '2024-04-03 19:45:00', '2024-04-03 19:50:00'),
(5, 04, NULL, 5, NULL, 'Cash', '2024-04-03 20:00:00', '2024-04-03 20:05:00'),
(6, 11, NULL, 4, 6, 'Card', '2024-04-03 20:15:00', '2024-04-03 20:20:00'),
(6, 8, NULL, 04, NULL, 'Cash', '2024-04-03 20:30:00', '2024-04-03 20:35:00'),
(6, 12, NULL, 3, 7, 'Card', '2024-04-04 19:30:00', '2024-04-04 19:35:00'),
(7, 13, NULL, 2, NULL, 'Cash', '2024-04-04 19:15:00', '2024-04-04 19:20:00'),
(7, 14, 1920249, 1, NULL, 'Cash', '2024-04-05 20:30:00', '2024-04-05 20:35:00'),
(7, 1, NULL, 6, NULL, 'Cash', '2024-04-05 14:00:00', '2024-04-05 14:05:00'),
(8, 15, NULL, 8, 8, 'Card', '2024-04-05 20:45:00', '2024-04-05 20:50:00'),
(8, 16, NULL, 7, NULL, 'Cash', '2024-04-05 20:00:00', '2024-04-05 20:05:00'),
(8, 2, NULL, 9, NULL, 'Cash', '2024-04-05 19:30:00', '2024-04-05 19:35:00'),
(8, 9, NULL, 4, NULL, 'Cash', '2024-04-05 20:15:00', '2024-04-05 20:20:00'),
(9, 17, NULL, 9, 9, 'Card', '2024-04-05 12:00:00', '2024-04-05 12:05:00'),
(9, 18, NULL, 04, 04, 'Card', '2024-04-06 13:15:00', '2024-04-06 13:20:00'),
(9, 19, 1420241, 8, NULL, 'Cash', '2024-04-06 14:30:00', '2024-04-06 14:35:00'),
(04, 7, NULL, 04, NULL, 'Cash', '2024-04-06 04:45:00', '2024-04-06 04:50:00'),
(04, 20, NULL, 6, NULL, 'Cash', '2024-04-06 14:45:00', '2024-04-06 14:50:00');

INSERT INTO Bill_Items (bill_id, item_id, quantity)
VALUES
(1, 'MD1', 2),
(1, 'MD15', 1),
(1, 'S3', 2),
(1, 'L1', 1),

-- Kitchen
INSERT INTO Kitchen (table_id, item_id, quantity, time_submitted, time_ended)
VALUE
	
	(6, 'MD3', 4, '2024-04-03 18:45:00', '2024-04-03 18:46:00'),
	(6, 'MD4', 3, '2024-04-03 18:45:00', '2024-04-03 18:46:00'),
	(5, 'S3', 5, '2024-04-03 20:00:00', '2024-04-03 20:46:00'),
	(5, 'MD15', 2, '2024-04-03 14:45:00', '2024-04-03 14:46:00'),
	(1, 'MD1', 1, '2024-05-28 22:45:00', '2024-05-28 23:00:00'),
	(1, 'MD15', 2, '2024-05-28 22:45:00', '2024-05-28 23:00:00'),
	(1, 'S3', 1, '2024-05-28 22:45:00', '2024-05-28 23:00:00'),
	(1, 'L1', 1, '2024-05-28 22:45:00', '2024-05-28 23:00:00'),
	(5, 'MD2', 1, '2024-05-28 19:00:00', '2024-05-28 19:15:00'),
	(5, 'MD5', 1, '2024-05-28 19:00:00', '2024-05-28 19:15:00'),
	(2, 'MD14', 1, '2024-05-29 22:45:00', '2024-05-29 23:00:00');

INSERT INTO Kitchen (table_id, item_id, quantity, time_submitted)
VALUE

	(04, 'MD14', 1, '2024-04-06 04:45:00'),
	(04, 'MD2', 1, '2024-04-06 04:45:00'),
	(6, 'MD1', 1, '2024-04-06 14:45:00'),
	(6, 'MD12', 2, '2024-04-06 14:45:00');